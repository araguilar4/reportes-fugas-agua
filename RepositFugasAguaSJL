<!DOCTYPE html>
e.preventDefault();
const nombre = document.getElementById('nombre').value;
const descripcion = document.getElementById('descripcion').value;
const ubicacion = document.getElementById('ubicacion').value;


const item = document.createElement('div');
item.className = 'report-item';
item.innerHTML = `<strong>${nombre || 'Anónimo'}</strong><br>
<p>${descripcion}</p>
<small><strong>Ubicación:</strong> ${ubicacion}</small>`;


lista.prepend(item);
form.reset();
});
// Obtener ubicación GPS
document.getElementById('btnUbicacion').addEventListener('click', () => {
if (navigator.geolocation) {
navigator.geolocation.getCurrentPosition(pos => {
const lat = pos.coords.latitude;
const lon = pos.coords.longitude;
document.getElementById('ubicacion').value = `https://www.google.com/maps?q=${lat},${lon}`;
});
} else {
alert('La geolocalización no es compatible con este navegador.');
}
});


// Botón para enviar por WhatsApp (simple demo)
form.addEventListener('submit', (e) => {
e.preventDefault();
const nombre = document.getElementById('nombre').value || 'Anónimo';
const descripcion = document.getElementById('descripcion').value;
const ubicacion = document.getElementById('ubicacion').value;


const mensaje = encodeURIComponent(`Reporte de fuga de agua:%0A%0A· Nombre: ${nombre}%0A· Descripción: ${descripcion}%0A· Ubicación: ${ubicacion}`);
const url = `https://wa.me/593__________?text=${mensaje}`;


window.open(url, '_blank');
});
// Configuración de Firebase
const firebaseConfig = {
apiKey: "TU_API_KEY",
authDomain: "TU_PROYECTO.firebaseapp.com",
projectId: "TU_PROYECTO",
storageBucket: "TU_PROYECTO.appspot.com",
messagingSenderId: "NUMERO",
appId: "TU_APP_ID"
};
const app = firebase.initializeApp(firebaseConfig);
const db = firebase.firestore();


// Obtener ubicación GPS
document.getElementById('btnUbicacion').addEventListener('click', () => {
if (navigator.geolocation) {
navigator.geolocation.getCurrentPosition(pos => {
const lat = pos.coords.latitude;
const lon = pos.coords.longitude;
document.getElementById('ubicacion').value = `https://www.google.com/maps?q=${lat},${lon}`;
});
} else {
alert('La geolocalización no es compatible con este navegador.');
}
});


// Enviar reporte y guardar en Firebase
form.addEventListener('submit', async (e) => {
e.preventDefault();
const nombre = document.getElementById('nombre').value || 'Anónimo';
const descripcion = document.getElementById('descripcion').value;
const ubicacion = document.getElementById('ubicacion').value;


await db.collection('reportes').add({ nombre, descripcion, ubicacion, fecha: new Date() });


const mensaje = encodeURIComponent(`Reporte de fuga de agua:%0A%0A· Nombre: ${nombre}%0A· Descripción: ${descripcion}%0A· Ubicación: ${ubicacion}`);
const url = `https://wa.me/593__________?text=${mensaje}`;
window.open(url, '_blank');
});
</script>
</body>
</html>
